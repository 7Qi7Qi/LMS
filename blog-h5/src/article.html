<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Article</title>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script src="js/jquery.params.js"></script>
</head>
<body>
<span id="top"></span>
<div class="leftCorner">
    <a href="home.html">首页</a>
</div>
<iframe id="main" name="main" width="100%" height="100%" src="404.html" onload="iFrameHeight()" frameborder="0"
        scrolling="no"></iframe></body>
<div class="navToTop">
    <a href="#top"><img style="transform: rotate(270deg); height: 50px; width: 50px"  src="assets/arrow.jpg"></a>
</div>

<script>
    $(function(){
        let page = $.query.get("page");
        console.log(fileExistCheck(page));
        if(!fileExistCheck(page)) {
            page = "404.html";
        }
        $.query.set("page", page);
        document.getElementById("main").src = page;
    });

    function iFrameHeight() {
        let ifm = document.getElementById("main");
        let subWeb = document.frames ? document.frames["main"].document : ifm.contentDocument;
        if (ifm != null && subWeb != null) {
            $("#main").height(0);//此处关键处 莫忘  清除上一个子页面高度的影响
            $("#main").height(subWeb.body.scrollHeight);
        }
    }
    function fileExistCheck(url) {
        let xhr = new XMLHttpRequest();
        xhr.onreadystatechange=function() {
            if (xhr.readyState === 4){   //if complete
                if(xhr.status === 200){  //check if "OK" (200)
                    //success
                } else {
                    return false;
                }
            }
        }
        xhr.open('HEAD', url, true);
        xhr.send();
        return xhr.status!=404;
    }
</script>

<style>
  .leftCorner{
    margin-top: 30px;
    margin-left: 50px;
    font-size: 25px;
    color: brown;
  }
  .navToTop{
    position: fixed;
    bottom: 50px;
    right: 50px;
  }
</style>
</html>